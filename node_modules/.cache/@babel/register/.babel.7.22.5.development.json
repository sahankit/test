{"{\"assumptions\":{},\"sourceRoot\":\"/Users/ankitsah/git/sample-node-project/app/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/ankitsah/git/sample-node-project/app\",\"filename\":\"/Users/ankitsah/git/sample-node-project/app/src/app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/ankitsah/git/sample-node-project/app\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.5:development":{"value":{"code":"\"use strict\";\n\nvar _extensionLogger = require(\"@hocuspocus/extension-logger\");\nvar _server = require(\"@hocuspocus/server\");\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _expressWs = _interopRequireDefault(require(\"express-ws\"));\nvar _extensionDatabase = require(\"@hocuspocus/extension-database\");\nvar _extensionRedis = require(\"@hocuspocus/extension-redis\");\nvar _mongojs = _interopRequireDefault(require(\"mongojs\"));\nvar _mongoist = _interopRequireDefault(require(\"mongoist\"));\nvar _bodyParser = _interopRequireDefault(require(\"body-parser\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); } //import { SQLite }  from '@hocuspocus/extension-sqlite'\n// const client = new MongoClient('mongodb://localhost:27017');\n// const mongodb = client.db(\"test\");\nconst mongojsDb = (0, _mongojs.default)('mongodb://localhost:27017');\nconst db = (0, _mongoist.default)(mongojsDb);\nconst server = _server.Server.configure({\n  extensions: [new _extensionLogger.Logger({\n    log: message => {\n      // do something custom here\n      console.log(\"message\", message);\n    }\n  }), new _extensionRedis.Redis({\n    // [required] Hostname of your Redis instance\n    host: \"127.0.0.1\",\n    // [required] Port of your Redis instance\n    port: 6379\n  }),\n  // new SQLite({\n  //   database: 'db.sqlite',\n  // }),\n  new _extensionDatabase.Database({\n    // Return a Promise to retrieve data …\n    fetch: async ({\n      documentName\n    }) => {\n      return new Promise((resolve, reject) => {\n        const query = {\n          name: documentName\n        };\n        db['documents'].findOne(query).then(result => {\n          //       console.log(\"found\",query)\n          resolve(result?.data?.buffer);\n        }).catch(e => {\n          reject(e);\n        });\n\n        //      mongodb?.collection(\"documents\")?.findOne(query).then((result)=>{\n        //       console.log(\"found\",query)\n        //       resolve(result?.data)\n        //      }).catch((e)=>{\n        // reject(e)\n        //      })\n      });\n    },\n\n    // … and a Promise to store data:\n    store: async a => {\n      const {\n        state,\n        documentName,\n        update\n      } = a;\n      const query = {\n        name: documentName\n      };\n      const values = {\n        data: state,\n        date: Date.now()\n      };\n      await db['documents'].findAndModify({\n        query,\n        update: _objectSpread(_objectSpread({}, query), values),\n        upsert: true,\n        new: true\n      });\n      console.log(\"update\", query);\n    }\n  })]\n});\nconst {\n  app\n} = (0, _expressWs.default)((0, _express.default)());\napp.use((req, res, next) => {\n  res.header('Access-Control-Allow-Origin', '*');\n  next();\n});\napp.get('/', (request, response) => {\n  response.send('Hello World!');\n});\napp.post('/version/:documentName', _bodyParser.default.json(), async (request, response) => {\n  const a = request.body;\n  const {\n    clientID,\n    snapshot,\n    date,\n    projectId\n  } = a;\n  const query = {\n    projectId: projectId\n  };\n  const values = a;\n  await db['documentVersion'].findAndModify({\n    query,\n    update: _objectSpread(_objectSpread({}, query), values),\n    upsert: true,\n    new: true\n  });\n  response.send();\n});\napp.ws('/:documentName', (websocket, request) => {\n  const context = {\n    user_id: 1234\n  };\n  server.handleConnection(websocket, request, context);\n});\napp.listen(1234, () => console.log('Listening on http://127.0.0.1:1234…'));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXh0ZW5zaW9uTG9nZ2VyIiwicmVxdWlyZSIsIl9zZXJ2ZXIiLCJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfZXhwcmVzc1dzIiwiX2V4dGVuc2lvbkRhdGFiYXNlIiwiX2V4dGVuc2lvblJlZGlzIiwiX21vbmdvanMiLCJfbW9uZ29pc3QiLCJfYm9keVBhcnNlciIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0Iiwib3duS2V5cyIsIm9iamVjdCIsImVudW1lcmFibGVPbmx5Iiwia2V5cyIsIk9iamVjdCIsImdldE93blByb3BlcnR5U3ltYm9scyIsInN5bWJvbHMiLCJmaWx0ZXIiLCJzeW0iLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwicHVzaCIsImFwcGx5IiwiX29iamVjdFNwcmVhZCIsInRhcmdldCIsImkiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJzb3VyY2UiLCJmb3JFYWNoIiwia2V5IiwiX2RlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyIsImRlZmluZVByb3BlcnRpZXMiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiX3RvUHJvcGVydHlLZXkiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImFyZyIsIl90b1ByaW1pdGl2ZSIsIlN0cmluZyIsImlucHV0IiwiaGludCIsInByaW0iLCJTeW1ib2wiLCJ0b1ByaW1pdGl2ZSIsInVuZGVmaW5lZCIsInJlcyIsImNhbGwiLCJUeXBlRXJyb3IiLCJOdW1iZXIiLCJtb25nb2pzRGIiLCJtb25nb2pzIiwiZGIiLCJtb25nb2lzdCIsInNlcnZlciIsIlNlcnZlciIsImNvbmZpZ3VyZSIsImV4dGVuc2lvbnMiLCJMb2dnZXIiLCJsb2ciLCJtZXNzYWdlIiwiY29uc29sZSIsIlJlZGlzIiwiaG9zdCIsInBvcnQiLCJEYXRhYmFzZSIsImZldGNoIiwiZG9jdW1lbnROYW1lIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJxdWVyeSIsIm5hbWUiLCJmaW5kT25lIiwidGhlbiIsInJlc3VsdCIsImRhdGEiLCJidWZmZXIiLCJjYXRjaCIsImUiLCJzdG9yZSIsImEiLCJzdGF0ZSIsInVwZGF0ZSIsInZhbHVlcyIsImRhdGUiLCJEYXRlIiwibm93IiwiZmluZEFuZE1vZGlmeSIsInVwc2VydCIsIm5ldyIsImFwcCIsImV4cHJlc3NXZWJzb2NrZXRzIiwiZXhwcmVzcyIsInVzZSIsInJlcSIsIm5leHQiLCJoZWFkZXIiLCJnZXQiLCJyZXF1ZXN0IiwicmVzcG9uc2UiLCJzZW5kIiwicG9zdCIsImJvZHlQYXJzZXIiLCJqc29uIiwiYm9keSIsImNsaWVudElEIiwic25hcHNob3QiLCJwcm9qZWN0SWQiLCJ3cyIsIndlYnNvY2tldCIsImNvbnRleHQiLCJ1c2VyX2lkIiwiaGFuZGxlQ29ubmVjdGlvbiIsImxpc3RlbiJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2Fua2l0c2FoL2dpdC9zYW1wbGUtbm9kZS1wcm9qZWN0L2FwcC9zcmMvIiwic291cmNlcyI6WyJhcHAuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSAnQGhvY3VzcG9jdXMvZXh0ZW5zaW9uLWxvZ2dlcidcbmltcG9ydCB7IFNlcnZlciB9IGZyb20gJ0Bob2N1c3BvY3VzL3NlcnZlcidcbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnXG5pbXBvcnQgZXhwcmVzc1dlYnNvY2tldHMgZnJvbSAnZXhwcmVzcy13cydcbmltcG9ydCB7IERhdGFiYXNlIH0gZnJvbSAnQGhvY3VzcG9jdXMvZXh0ZW5zaW9uLWRhdGFiYXNlJ1xuaW1wb3J0IHsgUmVkaXMgfSAgZnJvbSAnQGhvY3VzcG9jdXMvZXh0ZW5zaW9uLXJlZGlzJ1xuLy9pbXBvcnQgeyBTUUxpdGUgfSAgZnJvbSAnQGhvY3VzcG9jdXMvZXh0ZW5zaW9uLXNxbGl0ZSdcbmltcG9ydCBtb25nb2pzIGZyb20gJ21vbmdvanMnO1xuaW1wb3J0IG1vbmdvaXN0IGZyb20gJ21vbmdvaXN0JztcbmltcG9ydCBib2R5UGFyc2VyIGZyb20gJ2JvZHktcGFyc2VyJztcblxuLy8gY29uc3QgY2xpZW50ID0gbmV3IE1vbmdvQ2xpZW50KCdtb25nb2RiOi8vbG9jYWxob3N0OjI3MDE3Jyk7XG4vLyBjb25zdCBtb25nb2RiID0gY2xpZW50LmRiKFwidGVzdFwiKTtcblxuY29uc3QgbW9uZ29qc0RiID0gbW9uZ29qcygnbW9uZ29kYjovL2xvY2FsaG9zdDoyNzAxNycpO1xuY29uc3QgZGIgPSBtb25nb2lzdChtb25nb2pzRGIpO1xuXG5jb25zdCBzZXJ2ZXIgPSBTZXJ2ZXIuY29uZmlndXJlKHtcbiAgZXh0ZW5zaW9uczogW1xuICAgIG5ldyBMb2dnZXIoe1xuICAgICAgbG9nOiAobWVzc2FnZSkgPT4ge1xuICAgICAgICAvLyBkbyBzb21ldGhpbmcgY3VzdG9tIGhlcmVcbiAgICAgICAgY29uc29sZS5sb2coXCJtZXNzYWdlXCIsbWVzc2FnZSk7XG4gICAgICB9LFxuICAgIH0pLFxuICAgIG5ldyBSZWRpcyh7XG4gICAgICAvLyBbcmVxdWlyZWRdIEhvc3RuYW1lIG9mIHlvdXIgUmVkaXMgaW5zdGFuY2VcbiAgICAgIGhvc3Q6IFwiMTI3LjAuMC4xXCIsXG5cbiAgICAgIC8vIFtyZXF1aXJlZF0gUG9ydCBvZiB5b3VyIFJlZGlzIGluc3RhbmNlXG4gICAgICBwb3J0OiA2Mzc5LFxuICAgIH0pLFxuICAgIC8vIG5ldyBTUUxpdGUoe1xuICAgIC8vICAgZGF0YWJhc2U6ICdkYi5zcWxpdGUnLFxuICAgIC8vIH0pLFxuICBuZXcgRGF0YWJhc2Uoe1xuICAgIC8vIFJldHVybiBhIFByb21pc2UgdG8gcmV0cmlldmUgZGF0YSDigKZcbiAgICBmZXRjaDogYXN5bmMgKHsgZG9jdW1lbnROYW1lIH0pID0+IHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IHF1ZXJ5ID0geyBuYW1lOiBkb2N1bWVudE5hbWUgfTtcbiAgICAgXG4gICAgICAgZGJbJ2RvY3VtZW50cyddLmZpbmRPbmUocXVlcnkpLnRoZW4oKHJlc3VsdCk9PntcbiAgICAgICAgLy8gICAgICAgY29uc29sZS5sb2coXCJmb3VuZFwiLHF1ZXJ5KVxuICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdD8uZGF0YT8uYnVmZmVyKVxuICAgICAgICAgICAgIH0pLmNhdGNoKChlKT0+e1xuICAgICAgICByZWplY3QoZSlcbiAgICAgICAgICAgICB9KVxuXG4vLyAgICAgIG1vbmdvZGI/LmNvbGxlY3Rpb24oXCJkb2N1bWVudHNcIik/LmZpbmRPbmUocXVlcnkpLnRoZW4oKHJlc3VsdCk9Pntcbi8vICAgICAgIGNvbnNvbGUubG9nKFwiZm91bmRcIixxdWVyeSlcbi8vICAgICAgIHJlc29sdmUocmVzdWx0Py5kYXRhKVxuLy8gICAgICB9KS5jYXRjaCgoZSk9Pntcbi8vIHJlamVjdChlKVxuLy8gICAgICB9KVxuICBcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8g4oCmIGFuZCBhIFByb21pc2UgdG8gc3RvcmUgZGF0YTpcbiAgICBzdG9yZTogYXN5bmMgKGEpID0+IHtcbiAgICAgIGNvbnN0IHtzdGF0ZSxkb2N1bWVudE5hbWUsdXBkYXRlfT1hO1xuICAgICAgY29uc3QgcXVlcnkgPSB7IG5hbWU6IGRvY3VtZW50TmFtZSB9O1xuICAgICAgY29uc3QgdmFsdWVzID0ge2RhdGE6c3RhdGUsIGRhdGU6IERhdGUubm93KCl9XG4gICAgIGF3YWl0IGRiWydkb2N1bWVudHMnXS5maW5kQW5kTW9kaWZ5KHtcbiAgICAgICAgcXVlcnksXG4gICAgICAgIHVwZGF0ZTogeyAuLi5xdWVyeSwgLi4udmFsdWVzIH0sXG4gICAgICAgIHVwc2VydDogdHJ1ZSxcbiAgICAgICAgbmV3OiB0cnVlLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnNvbGUubG9nKFwidXBkYXRlXCIscXVlcnkpXG4gICAgfSxcbiAgfSksXG5cbiAgXSxcbn0pXG5cbmNvbnN0IHsgYXBwIH0gPSBleHByZXNzV2Vic29ja2V0cyhleHByZXNzKCkpXG5cbmFwcC51c2UoKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsICcqJyk7XG4gIG5leHQoKTtcbn0pO1xuYXBwLmdldCgnLycsIChyZXF1ZXN0LCByZXNwb25zZSkgPT4ge1xuICByZXNwb25zZS5zZW5kKCdIZWxsbyBXb3JsZCEnKVxufSlcbmFwcC5wb3N0KCcvdmVyc2lvbi86ZG9jdW1lbnROYW1lJywgYm9keVBhcnNlci5qc29uKCksYXN5bmMgKHJlcXVlc3QsIHJlc3BvbnNlKSA9PiB7XG4gIGNvbnN0IGEgPSByZXF1ZXN0LmJvZHlcbiAgY29uc3Qge2NsaWVudElELHNuYXBzaG90LGRhdGUscHJvamVjdElkfT1hO1xuICBjb25zdCBxdWVyeSA9IHsgcHJvamVjdElkOiBwcm9qZWN0SWQgfTtcbiAgY29uc3QgdmFsdWVzID0gYTtcbiAgYXdhaXQgZGJbJ2RvY3VtZW50VmVyc2lvbiddLmZpbmRBbmRNb2RpZnkoe1xuICAgIHF1ZXJ5LFxuICAgIHVwZGF0ZTogeyAuLi5xdWVyeSwgLi4udmFsdWVzIH0sXG4gICAgdXBzZXJ0OiB0cnVlLFxuICAgIG5ldzogdHJ1ZSxcbiAgfSk7XG4gIHJlc3BvbnNlLnNlbmQoKTtcbn0pXG5hcHAud3MoJy86ZG9jdW1lbnROYW1lJywgKHdlYnNvY2tldCwgcmVxdWVzdCkgPT4ge1xuICBjb25zdCBjb250ZXh0ID0geyB1c2VyX2lkOiAxMjM0IH1cbiAgc2VydmVyLmhhbmRsZUNvbm5lY3Rpb24od2Vic29ja2V0LCByZXF1ZXN0LCBjb250ZXh0KVxufSlcblxuYXBwLmxpc3RlbigxMjM0LCAoKSA9PiBjb25zb2xlLmxvZygnTGlzdGVuaW5nIG9uIGh0dHA6Ly8xMjcuMC4wLjE6MTIzNOKApicpKSJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFBQSxnQkFBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsT0FBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsUUFBQSxHQUFBQyxzQkFB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","map":{"version":3,"names":["_extensionLogger","require","_server","_express","_interopRequireDefault","_expressWs","_extensionDatabase","_extensionRedis","_mongojs","_mongoist","_bodyParser","obj","__esModule","default","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","mongojsDb","mongojs","db","mongoist","server","Server","configure","extensions","Logger","log","message","console","Redis","host","port","Database","fetch","documentName","Promise","resolve","reject","query","name","findOne","then","result","data","buffer","catch","e","store","a","state","update","values","date","Date","now","findAndModify","upsert","new","app","expressWebsockets","express","use","req","next","header","get","request","response","send","post","bodyParser","json","body","clientID","snapshot","projectId","ws","websocket","context","user_id","handleConnection","listen"],"sourceRoot":"/Users/ankitsah/git/sample-node-project/app/src/","sources":["app.js"],"sourcesContent":["import { Logger } from '@hocuspocus/extension-logger'\nimport { Server } from '@hocuspocus/server'\nimport express from 'express'\nimport expressWebsockets from 'express-ws'\nimport { Database } from '@hocuspocus/extension-database'\nimport { Redis }  from '@hocuspocus/extension-redis'\n//import { SQLite }  from '@hocuspocus/extension-sqlite'\nimport mongojs from 'mongojs';\nimport mongoist from 'mongoist';\nimport bodyParser from 'body-parser';\n\n// const client = new MongoClient('mongodb://localhost:27017');\n// const mongodb = client.db(\"test\");\n\nconst mongojsDb = mongojs('mongodb://localhost:27017');\nconst db = mongoist(mongojsDb);\n\nconst server = Server.configure({\n  extensions: [\n    new Logger({\n      log: (message) => {\n        // do something custom here\n        console.log(\"message\",message);\n      },\n    }),\n    new Redis({\n      // [required] Hostname of your Redis instance\n      host: \"127.0.0.1\",\n\n      // [required] Port of your Redis instance\n      port: 6379,\n    }),\n    // new SQLite({\n    //   database: 'db.sqlite',\n    // }),\n  new Database({\n    // Return a Promise to retrieve data …\n    fetch: async ({ documentName }) => {\n      return new Promise((resolve, reject) => {\n        const query = { name: documentName };\n     \n       db['documents'].findOne(query).then((result)=>{\n        //       console.log(\"found\",query)\n              resolve(result?.data?.buffer)\n             }).catch((e)=>{\n        reject(e)\n             })\n\n//      mongodb?.collection(\"documents\")?.findOne(query).then((result)=>{\n//       console.log(\"found\",query)\n//       resolve(result?.data)\n//      }).catch((e)=>{\n// reject(e)\n//      })\n  \n      });\n    },\n    // … and a Promise to store data:\n    store: async (a) => {\n      const {state,documentName,update}=a;\n      const query = { name: documentName };\n      const values = {data:state, date: Date.now()}\n     await db['documents'].findAndModify({\n        query,\n        update: { ...query, ...values },\n        upsert: true,\n        new: true,\n      });\n\n      console.log(\"update\",query)\n    },\n  }),\n\n  ],\n})\n\nconst { app } = expressWebsockets(express())\n\napp.use((req, res, next) => {\n  res.header('Access-Control-Allow-Origin', '*');\n  next();\n});\napp.get('/', (request, response) => {\n  response.send('Hello World!')\n})\napp.post('/version/:documentName', bodyParser.json(),async (request, response) => {\n  const a = request.body\n  const {clientID,snapshot,date,projectId}=a;\n  const query = { projectId: projectId };\n  const values = a;\n  await db['documentVersion'].findAndModify({\n    query,\n    update: { ...query, ...values },\n    upsert: true,\n    new: true,\n  });\n  response.send();\n})\napp.ws('/:documentName', (websocket, request) => {\n  const context = { user_id: 1234 }\n  server.handleConnection(websocket, request, context)\n})\n\napp.listen(1234, () => console.log('Listening on http://127.0.0.1:1234…'))"],"mappings":"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"}},"mtime":1688407602902},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ankitsah/git/sample-node-project/app/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/ankitsah/git/sample-node-project/app\",\"filename\":\"/Users/ankitsah/git/sample-node-project/app/src/mongoDBImpl.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/ankitsah/git/sample-node-project/app\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.5:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MongoDB = void 0;\nvar _extensionDatabase = require(\"@hocuspocus/extension-database\");\nvar _mongodb = require(\"mongodb\");\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nclass MongoDB extends _extensionDatabase.Database {\n  constructor() {\n    super({});\n    _defineProperty(this, \"configuration\", {\n      fetch: async ({\n        documentName\n      }) => {\n        return new Promise((resolve, reject) => {\n          const query = {\n            name: documentName\n          };\n          this.db?.collection(\"documents\")?.findOne(query).then(result => {\n            console.log(\"found\", query);\n            resolve(result?.data);\n          }).catch(e => {\n            reject(e);\n          });\n        });\n      },\n      store: async ({\n        documentName,\n        state\n      }) => {\n        const query = {\n          name: documentName\n        };\n        const options = {\n          upsert: true\n        };\n        const updateDoc = {\n          $set: {\n            data: state,\n            date: Date.now()\n          }\n        };\n        this.db?.collection(\"documents\")?.updateOne(query, updateDoc);\n        console.log(\"i am update\");\n      }\n    });\n  }\n  async onConfigure() {\n    const client = new _mongodb.MongoClient('mongodb://localhost:27017');\n    this.db = client.db(\"test\");\n  }\n  async onListen() {}\n}\nexports.MongoDB = MongoDB;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXh0ZW5zaW9uRGF0YWJhc2UiLCJyZXF1aXJlIiwiX21vbmdvZGIiLCJfZGVmaW5lUHJvcGVydHkiLCJvYmoiLCJrZXkiLCJ2YWx1ZSIsIl90b1Byb3BlcnR5S2V5IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJhcmciLCJfdG9QcmltaXRpdmUiLCJTdHJpbmciLCJpbnB1dCIsImhpbnQiLCJwcmltIiwiU3ltYm9sIiwidG9QcmltaXRpdmUiLCJ1bmRlZmluZWQiLCJyZXMiLCJjYWxsIiwiVHlwZUVycm9yIiwiTnVtYmVyIiwiTW9uZ29EQiIsIkRhdGFiYXNlIiwiY29uc3RydWN0b3IiLCJmZXRjaCIsImRvY3VtZW50TmFtZSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicXVlcnkiLCJuYW1lIiwiZGIiLCJjb2xsZWN0aW9uIiwiZmluZE9uZSIsInRoZW4iLCJyZXN1bHQiLCJjb25zb2xlIiwibG9nIiwiZGF0YSIsImNhdGNoIiwiZSIsInN0b3JlIiwic3RhdGUiLCJvcHRpb25zIiwidXBzZXJ0IiwidXBkYXRlRG9jIiwiJHNldCIsImRhdGUiLCJEYXRlIiwibm93IiwidXBkYXRlT25lIiwib25Db25maWd1cmUiLCJjbGllbnQiLCJNb25nb0NsaWVudCIsIm9uTGlzdGVuIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2Fua2l0c2FoL2dpdC9zYW1wbGUtbm9kZS1wcm9qZWN0L2FwcC9zcmMvIiwic291cmNlcyI6WyJtb25nb0RCSW1wbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEYXRhYmFzZSwgRGF0YWJhc2VDb25maWd1cmF0aW9uIH0gZnJvbSAnQGhvY3VzcG9jdXMvZXh0ZW5zaW9uLWRhdGFiYXNlJ1xuaW1wb3J0IHtNb25nb0NsaWVudH0gZnJvbSAnbW9uZ29kYidcblxuXG5leHBvcnQgY2xhc3MgTW9uZ29EQiBleHRlbmRzIERhdGFiYXNlIHtcbiAgXG5cbiAgY29uZmlndXJhdGlvbiA9IHtcbiAgICBmZXRjaDogYXN5bmMgKHsgZG9jdW1lbnROYW1lIH0pID0+IHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IHF1ZXJ5ID0geyBuYW1lOiBkb2N1bWVudE5hbWUgfTtcbiAgICAgICAgIHRoaXMuZGI/LmNvbGxlY3Rpb24oXCJkb2N1bWVudHNcIik/LmZpbmRPbmUocXVlcnkpLnRoZW4oKHJlc3VsdCk9PntcbiAgICAgIGNvbnNvbGUubG9nKFwiZm91bmRcIixxdWVyeSlcbiAgICAgIHJlc29sdmUocmVzdWx0Py5kYXRhKVxuICAgICB9KS5jYXRjaCgoZSk9PntcbiAgICAgICAgcmVqZWN0KGUpXG4gICAgIH0pXG4gICAgICB9KVxuICAgIH0sXG4gICAgc3RvcmU6IGFzeW5jICh7IGRvY3VtZW50TmFtZSwgc3RhdGUgfSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHF1ZXJ5ID0geyBuYW1lOiBkb2N1bWVudE5hbWUgfTtcbiAgICAgICAgICBjb25zdCBvcHRpb25zID0geyB1cHNlcnQ6IHRydWUgfTtcblxuICAgICAgY29uc3QgdXBkYXRlRG9jID0ge1xuICAgICAgICAkc2V0OiB7XG4gICAgICAgICAgZGF0YTogc3RhdGUsXG4gICAgICAgICAgZGF0ZTogRGF0ZS5ub3coKVxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICAgICB0aGlzLmRiPy5jb2xsZWN0aW9uKFwiZG9jdW1lbnRzXCIpPy51cGRhdGVPbmUocXVlcnksdXBkYXRlRG9jKTtcbiAgICAgICBjb25zb2xlLmxvZyhcImkgYW0gdXBkYXRlXCIpXG4gICAgfSxcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKHt9KVxuICB9XG5cbiAgYXN5bmMgb25Db25maWd1cmUoKSB7XG4gICAgY29uc3QgY2xpZW50ID0gbmV3IE1vbmdvQ2xpZW50KCdtb25nb2RiOi8vbG9jYWxob3N0OjI3MDE3Jyk7XG4gICAgdGhpcy5kYiA9IGNsaWVudC5kYihcInRlc3RcIik7XG4gIH1cblxuICBhc3luYyBvbkxpc3RlbigpIHtcbiAgIFxuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLGtCQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxRQUFBLEdBQUFELE9BQUE7QUFBbUMsU0FBQUUsZ0JBQUFDLEdBQUEsRUFBQUMsR0FBQSxFQUFBQyxLQUFBLElBQUFELEdBQUEsR0FBQUUsY0FBQSxDQUFBRixHQUFBLE9BQUFBLEdBQUEsSUFBQUQsR0FBQSxJQUFBSSxNQUFBLENBQUFDLGNBQUEsQ0FBQUwsR0FBQSxFQUFBQyxHQUFBLElBQUFDLEtBQUEsRUFBQUEsS0FBQSxFQUFBSSxVQUFBLFFBQUFDLFlBQUEsUUFBQUMsUUFBQSxvQkFBQVIsR0FBQSxDQUFBQyxHQUFBLElBQUFDLEtBQUEsV0FBQUYsR0FBQTtBQUFBLFNBQUFHLGVBQUFNLEdBQUEsUUFBQVIsR0FBQSxHQUFBUyxZQUFBLENBQUFELEdBQUEsMkJBQUFSLEdBQUEsZ0JBQUFBLEdBQUEsR0FBQVUsTUFBQSxDQUFBVixHQUFBO0FBQUEsU0FBQVMsYUFBQUUsS0FBQSxFQUFBQyxJQUFBLGVBQUFELEtBQUEsaUJBQUFBLEtBQUEsa0JBQUFBLEtBQUEsTUFBQUUsSUFBQSxHQUFBRixLQUFBLENBQUFHLE1BQUEsQ0FBQUMsV0FBQSxPQUFBRixJQUFBLEtBQUFHLFNBQUEsUUFBQUMsR0FBQSxHQUFBSixJQUFBLENBQUFLLElBQUEsQ0FBQVAsS0FBQSxFQUFBQyxJQUFBLDJCQUFBSyxHQUFBLHNCQUFBQSxHQUFBLFlBQUFFLFNBQUEsNERBQUFQLElBQUEsZ0JBQUFGLE1BQUEsR0FBQVUsTUFBQSxFQUFBVCxLQUFBO0FBRzVCLE1BQU1VLE9BQU8sU0FBU0MsMkJBQVEsQ0FBQztFQThCcENDLFdBQVdBLENBQUEsRUFBRztJQUNaLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUFBekIsZUFBQSx3QkE1Qks7TUFDZDBCLEtBQUssRUFBRSxNQUFBQSxDQUFPO1FBQUVDO01BQWEsQ0FBQyxLQUFLO1FBQ2pDLE9BQU8sSUFBSUMsT0FBTyxDQUFDLENBQUNDLE9BQU8sRUFBRUMsTUFBTSxLQUFLO1VBQ3RDLE1BQU1DLEtBQUssR0FBRztZQUFFQyxJQUFJLEVBQUVMO1VBQWEsQ0FBQztVQUNuQyxJQUFJLENBQUNNLEVBQUUsRUFBRUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxFQUFFQyxPQUFPLENBQUNKLEtBQUssQ0FBQyxDQUFDSyxJQUFJLENBQUVDLE1BQU0sSUFBRztZQUNuRUMsT0FBTyxDQUFDQyxHQUFHLENBQUMsT0FBTyxFQUFDUixLQUFLLENBQUM7WUFDMUJGLE9BQU8sQ0FBQ1EsTUFBTSxFQUFFRyxJQUFJLENBQUM7VUFDdEIsQ0FBQyxDQUFDLENBQUNDLEtBQUssQ0FBRUMsQ0FBQyxJQUFHO1lBQ1haLE1BQU0sQ0FBQ1ksQ0FBQyxDQUFDO1VBQ1osQ0FBQyxDQUFDO1FBQ0QsQ0FBQyxDQUFDO01BQ0osQ0FBQztNQUNEQyxLQUFLLEVBQUUsTUFBQUEsQ0FBTztRQUFFaEIsWUFBWTtRQUFFaUI7TUFBTSxDQUFDLEtBQUs7UUFDcEMsTUFBTWIsS0FBSyxHQUFHO1VBQUVDLElBQUksRUFBRUw7UUFBYSxDQUFDO1FBQ3BDLE1BQU1rQixPQUFPLEdBQUc7VUFBRUMsTUFBTSxFQUFFO1FBQUssQ0FBQztRQUVwQyxNQUFNQyxTQUFTLEdBQUc7VUFDaEJDLElBQUksRUFBRTtZQUNKUixJQUFJLEVBQUVJLEtBQUs7WUFDWEssSUFBSSxFQUFFQyxJQUFJLENBQUNDLEdBQUcsQ0FBQztVQUNqQjtRQUNGLENBQUM7UUFDQSxJQUFJLENBQUNsQixFQUFFLEVBQUVDLFVBQVUsQ0FBQyxXQUFXLENBQUMsRUFBRWtCLFNBQVMsQ0FBQ3JCLEtBQUssRUFBQ2dCLFNBQVMsQ0FBQztRQUM1RFQsT0FBTyxDQUFDQyxHQUFHLENBQUMsYUFBYSxDQUFDO01BQzdCO0lBQ0YsQ0FBQztFQUlEO0VBRUEsTUFBTWMsV0FBV0EsQ0FBQSxFQUFHO0lBQ2xCLE1BQU1DLE1BQU0sR0FBRyxJQUFJQyxvQkFBVyxDQUFDLDJCQUEyQixDQUFDO0lBQzNELElBQUksQ0FBQ3RCLEVBQUUsR0FBR3FCLE1BQU0sQ0FBQ3JCLEVBQUUsQ0FBQyxNQUFNLENBQUM7RUFDN0I7RUFFQSxNQUFNdUIsUUFBUUEsQ0FBQSxFQUFHLENBRWpCO0FBQ0Y7QUFBQ0MsT0FBQSxDQUFBbEMsT0FBQSxHQUFBQSxPQUFBIn0=","map":{"version":3,"names":["_extensionDatabase","require","_mongodb","_defineProperty","obj","key","value","_toPropertyKey","Object","defineProperty","enumerable","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","MongoDB","Database","constructor","fetch","documentName","Promise","resolve","reject","query","name","db","collection","findOne","then","result","console","log","data","catch","e","store","state","options","upsert","updateDoc","$set","date","Date","now","updateOne","onConfigure","client","MongoClient","onListen","exports"],"sourceRoot":"/Users/ankitsah/git/sample-node-project/app/src/","sources":["mongoDBImpl.js"],"sourcesContent":["import { Database, DatabaseConfiguration } from '@hocuspocus/extension-database'\nimport {MongoClient} from 'mongodb'\n\n\nexport class MongoDB extends Database {\n  \n\n  configuration = {\n    fetch: async ({ documentName }) => {\n      return new Promise((resolve, reject) => {\n        const query = { name: documentName };\n         this.db?.collection(\"documents\")?.findOne(query).then((result)=>{\n      console.log(\"found\",query)\n      resolve(result?.data)\n     }).catch((e)=>{\n        reject(e)\n     })\n      })\n    },\n    store: async ({ documentName, state }) => {\n          const query = { name: documentName };\n          const options = { upsert: true };\n\n      const updateDoc = {\n        $set: {\n          data: state,\n          date: Date.now()\n        },\n      };\n       this.db?.collection(\"documents\")?.updateOne(query,updateDoc);\n       console.log(\"i am update\")\n    },\n  }\n\n  constructor() {\n    super({})\n  }\n\n  async onConfigure() {\n    const client = new MongoClient('mongodb://localhost:27017');\n    this.db = client.db(\"test\");\n  }\n\n  async onListen() {\n   \n  }\n}\n"],"mappings":";;;;;;AAAA,IAAAA,kBAAA,GAAAC,OAAA;AACA,IAAAC,QAAA,GAAAD,OAAA;AAAmC,SAAAE,gBAAAC,GAAA,EAAAC,GAAA,EAAAC,KAAA,IAAAD,GAAA,GAAAE,cAAA,CAAAF,GAAA,OAAAA,GAAA,IAAAD,GAAA,IAAAI,MAAA,CAAAC,cAAA,CAAAL,GAAA,EAAAC,GAAA,IAAAC,KAAA,EAAAA,KAAA,EAAAI,UAAA,QAAAC,YAAA,QAAAC,QAAA,oBAAAR,GAAA,CAAAC,GAAA,IAAAC,KAAA,WAAAF,GAAA;AAAA,SAAAG,eAAAM,GAAA,QAAAR,GAAA,GAAAS,YAAA,CAAAD,GAAA,2BAAAR,GAAA,gBAAAA,GAAA,GAAAU,MAAA,CAAAV,GAAA;AAAA,SAAAS,aAAAE,KAAA,EAAAC,IAAA,eAAAD,KAAA,iBAAAA,KAAA,kBAAAA,KAAA,MAAAE,IAAA,GAAAF,KAAA,CAAAG,MAAA,CAAAC,WAAA,OAAAF,IAAA,KAAAG,SAAA,QAAAC,GAAA,GAAAJ,IAAA,CAAAK,IAAA,CAAAP,KAAA,EAAAC,IAAA,2BAAAK,GAAA,sBAAAA,GAAA,YAAAE,SAAA,4DAAAP,IAAA,gBAAAF,MAAA,GAAAU,MAAA,EAAAT,KAAA;AAG5B,MAAMU,OAAO,SAASC,2BAAQ,CAAC;EA8BpCC,WAAWA,CAAA,EAAG;IACZ,KAAK,CAAC,CAAC,CAAC,CAAC;IAAAzB,eAAA,wBA5BK;MACd0B,KAAK,EAAE,MAAAA,CAAO;QAAEC;MAAa,CAAC,KAAK;QACjC,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;UACtC,MAAMC,KAAK,GAAG;YAAEC,IAAI,EAAEL;UAAa,CAAC;UACnC,IAAI,CAACM,EAAE,EAAEC,UAAU,CAAC,WAAW,CAAC,EAAEC,OAAO,CAACJ,KAAK,CAAC,CAACK,IAAI,CAAEC,MAAM,IAAG;YACnEC,OAAO,CAACC,GAAG,CAAC,OAAO,EAACR,KAAK,CAAC;YAC1BF,OAAO,CAACQ,MAAM,EAAEG,IAAI,CAAC;UACtB,CAAC,CAAC,CAACC,KAAK,CAAEC,CAAC,IAAG;YACXZ,MAAM,CAACY,CAAC,CAAC;UACZ,CAAC,CAAC;QACD,CAAC,CAAC;MACJ,CAAC;MACDC,KAAK,EAAE,MAAAA,CAAO;QAAEhB,YAAY;QAAEiB;MAAM,CAAC,KAAK;QACpC,MAAMb,KAAK,GAAG;UAAEC,IAAI,EAAEL;QAAa,CAAC;QACpC,MAAMkB,OAAO,GAAG;UAAEC,MAAM,EAAE;QAAK,CAAC;QAEpC,MAAMC,SAAS,GAAG;UAChBC,IAAI,EAAE;YACJR,IAAI,EAAEI,KAAK;YACXK,IAAI,EAAEC,IAAI,CAACC,GAAG,CAAC;UACjB;QACF,CAAC;QACA,IAAI,CAAClB,EAAE,EAAEC,UAAU,CAAC,WAAW,CAAC,EAAEkB,SAAS,CAACrB,KAAK,EAACgB,SAAS,CAAC;QAC5DT,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC;MAC7B;IACF,CAAC;EAID;EAEA,MAAMc,WAAWA,CAAA,EAAG;IAClB,MAAMC,MAAM,GAAG,IAAIC,oBAAW,CAAC,2BAA2B,CAAC;IAC3D,IAAI,CAACtB,EAAE,GAAGqB,MAAM,CAACrB,EAAE,CAAC,MAAM,CAAC;EAC7B;EAEA,MAAMuB,QAAQA,CAAA,EAAG,CAEjB;AACF;AAACC,OAAA,CAAAlC,OAAA,GAAAA,OAAA"}},"mtime":1688151175326},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ankitsah/git/sample-node-project/app/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/ankitsah/git/sample-node-project/app\",\"filename\":\"/Users/ankitsah/git/sample-node-project/app/src/mongoDBImpl.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/ankitsah/git/sample-node-project/app\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.5:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MongoDB = void 0;\nvar _extensionDatabase = require(\"@hocuspocus/extension-database\");\nvar _mongodb = require(\"mongodb\");\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nclass MongoDB extends _extensionDatabase.Database {\n  constructor() {\n    super({});\n    _defineProperty(this, \"configuration\", {\n      fetch: async ({\n        documentName\n      }) => {\n        return new Promise((resolve, reject) => {\n          const query = {\n            name: documentName\n          };\n          this.db?.collection(\"documents\")?.findOne(query).then(result => {\n            console.log(\"found\", query);\n            resolve(result?.data);\n          }).catch(e => {\n            reject(e);\n          });\n        });\n      },\n      store: async ({\n        documentName,\n        state\n      }) => {\n        const query = {\n          name: documentName\n        };\n        const options = {\n          upsert: true\n        };\n        const updateDoc = {\n          $set: {\n            data: state,\n            date: Date.now()\n          }\n        };\n        this.db?.collection(\"documents\")?.updateOne(query, updateDoc);\n        console.log(\"i am update\");\n      }\n    });\n  }\n  async onConfigure() {\n    const client = new _mongodb.MongoClient('mongodb://localhost:27017');\n    this.db = client.db(\"test\");\n  }\n  async onListen() {}\n}\nexports.MongoDB = MongoDB;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXh0ZW5zaW9uRGF0YWJhc2UiLCJyZXF1aXJlIiwiX21vbmdvZGIiLCJfZGVmaW5lUHJvcGVydHkiLCJvYmoiLCJrZXkiLCJ2YWx1ZSIsIl90b1Byb3BlcnR5S2V5IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJhcmciLCJfdG9QcmltaXRpdmUiLCJTdHJpbmciLCJpbnB1dCIsImhpbnQiLCJwcmltIiwiU3ltYm9sIiwidG9QcmltaXRpdmUiLCJ1bmRlZmluZWQiLCJyZXMiLCJjYWxsIiwiVHlwZUVycm9yIiwiTnVtYmVyIiwiTW9uZ29EQiIsIkRhdGFiYXNlIiwiY29uc3RydWN0b3IiLCJmZXRjaCIsImRvY3VtZW50TmFtZSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicXVlcnkiLCJuYW1lIiwiZGIiLCJjb2xsZWN0aW9uIiwiZmluZE9uZSIsInRoZW4iLCJyZXN1bHQiLCJjb25zb2xlIiwibG9nIiwiZGF0YSIsImNhdGNoIiwiZSIsInN0b3JlIiwic3RhdGUiLCJvcHRpb25zIiwidXBzZXJ0IiwidXBkYXRlRG9jIiwiJHNldCIsImRhdGUiLCJEYXRlIiwibm93IiwidXBkYXRlT25lIiwib25Db25maWd1cmUiLCJjbGllbnQiLCJNb25nb0NsaWVudCIsIm9uTGlzdGVuIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2Fua2l0c2FoL2dpdC9zYW1wbGUtbm9kZS1wcm9qZWN0L2FwcC9zcmMvIiwic291cmNlcyI6WyJtb25nb0RCSW1wbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEYXRhYmFzZSwgRGF0YWJhc2VDb25maWd1cmF0aW9uIH0gZnJvbSAnQGhvY3VzcG9jdXMvZXh0ZW5zaW9uLWRhdGFiYXNlJ1xuaW1wb3J0IHtNb25nb0NsaWVudH0gZnJvbSAnbW9uZ29kYidcblxuXG5leHBvcnQgY2xhc3MgTW9uZ29EQiBleHRlbmRzIERhdGFiYXNlIHtcbiAgXG5cbiAgY29uZmlndXJhdGlvbiA9IHtcbiAgICBmZXRjaDogYXN5bmMgKHsgZG9jdW1lbnROYW1lIH0pID0+IHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IHF1ZXJ5ID0geyBuYW1lOiBkb2N1bWVudE5hbWUgfTtcbiAgICAgICAgIHRoaXMuZGI/LmNvbGxlY3Rpb24oXCJkb2N1bWVudHNcIik/LmZpbmRPbmUocXVlcnkpLnRoZW4oKHJlc3VsdCk9PntcbiAgICAgIGNvbnNvbGUubG9nKFwiZm91bmRcIixxdWVyeSlcbiAgICAgIHJlc29sdmUocmVzdWx0Py5kYXRhKVxuICAgICB9KS5jYXRjaCgoZSk9PntcbiAgICAgICAgcmVqZWN0KGUpXG4gICAgIH0pXG4gICAgICB9KVxuICAgIH0sXG4gICAgc3RvcmU6IGFzeW5jICh7IGRvY3VtZW50TmFtZSwgc3RhdGUgfSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHF1ZXJ5ID0geyBuYW1lOiBkb2N1bWVudE5hbWUgfTtcbiAgICAgICAgICBjb25zdCBvcHRpb25zID0geyB1cHNlcnQ6IHRydWUgfTtcblxuICAgICAgY29uc3QgdXBkYXRlRG9jID0ge1xuICAgICAgICAkc2V0OiB7XG4gICAgICAgICAgZGF0YTogc3RhdGUsXG4gICAgICAgICAgZGF0ZTogRGF0ZS5ub3coKVxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICAgICB0aGlzLmRiPy5jb2xsZWN0aW9uKFwiZG9jdW1lbnRzXCIpPy51cGRhdGVPbmUocXVlcnksdXBkYXRlRG9jKTtcbiAgICAgICBjb25zb2xlLmxvZyhcImkgYW0gdXBkYXRlXCIpXG4gICAgfSxcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKHt9KVxuICB9XG5cbiAgYXN5bmMgb25Db25maWd1cmUoKSB7XG4gICAgY29uc3QgY2xpZW50ID0gbmV3IE1vbmdvQ2xpZW50KCdtb25nb2RiOi8vbG9jYWxob3N0OjI3MDE3Jyk7XG4gICAgdGhpcy5kYiA9IGNsaWVudC5kYihcInRlc3RcIik7XG4gIH1cblxuICBhc3luYyBvbkxpc3RlbigpIHtcbiAgIFxuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLGtCQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxRQUFBLEdBQUFELE9BQUE7QUFBbUMsU0FBQUUsZ0JBQUFDLEdBQUEsRUFBQUMsR0FBQSxFQUFBQyxLQUFBLElBQUFELEdBQUEsR0FBQUUsY0FBQSxDQUFBRixHQUFBLE9BQUFBLEdBQUEsSUFBQUQsR0FBQSxJQUFBSSxNQUFBLENBQUFDLGNBQUEsQ0FBQUwsR0FBQSxFQUFBQyxHQUFBLElBQUFDLEtBQUEsRUFBQUEsS0FBQSxFQUFBSSxVQUFBLFFBQUFDLFlBQUEsUUFBQUMsUUFBQSxvQkFBQVIsR0FBQSxDQUFBQyxHQUFBLElBQUFDLEtBQUEsV0FBQUYsR0FBQTtBQUFBLFNBQUFHLGVBQUFNLEdBQUEsUUFBQVIsR0FBQSxHQUFBUyxZQUFBLENBQUFELEdBQUEsMkJBQUFSLEdBQUEsZ0JBQUFBLEdBQUEsR0FBQVUsTUFBQSxDQUFBVixHQUFBO0FBQUEsU0FBQVMsYUFBQUUsS0FBQSxFQUFBQyxJQUFBLGVBQUFELEtBQUEsaUJBQUFBLEtBQUEsa0JBQUFBLEtBQUEsTUFBQUUsSUFBQSxHQUFBRixLQUFBLENBQUFHLE1BQUEsQ0FBQUMsV0FBQSxPQUFBRixJQUFBLEtBQUFHLFNBQUEsUUFBQUMsR0FBQSxHQUFBSixJQUFBLENBQUFLLElBQUEsQ0FBQVAsS0FBQSxFQUFBQyxJQUFBLDJCQUFBSyxHQUFBLHNCQUFBQSxHQUFBLFlBQUFFLFNBQUEsNERBQUFQLElBQUEsZ0JBQUFGLE1BQUEsR0FBQVUsTUFBQSxFQUFBVCxLQUFBO0FBRzVCLE1BQU1VLE9BQU8sU0FBU0MsMkJBQVEsQ0FBQztFQThCcENDLFdBQVdBLENBQUEsRUFBRztJQUNaLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUFBekIsZUFBQSx3QkE1Qks7TUFDZDBCLEtBQUssRUFBRSxNQUFBQSxDQUFPO1FBQUVDO01BQWEsQ0FBQyxLQUFLO1FBQ2pDLE9BQU8sSUFBSUMsT0FBTyxDQUFDLENBQUNDLE9BQU8sRUFBRUMsTUFBTSxLQUFLO1VBQ3RDLE1BQU1DLEtBQUssR0FBRztZQUFFQyxJQUFJLEVBQUVMO1VBQWEsQ0FBQztVQUNuQyxJQUFJLENBQUNNLEVBQUUsRUFBRUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxFQUFFQyxPQUFPLENBQUNKLEtBQUssQ0FBQyxDQUFDSyxJQUFJLENBQUVDLE1BQU0sSUFBRztZQUNuRUMsT0FBTyxDQUFDQyxHQUFHLENBQUMsT0FBTyxFQUFDUixLQUFLLENBQUM7WUFDMUJGLE9BQU8sQ0FBQ1EsTUFBTSxFQUFFRyxJQUFJLENBQUM7VUFDdEIsQ0FBQyxDQUFDLENBQUNDLEtBQUssQ0FBRUMsQ0FBQyxJQUFHO1lBQ1haLE1BQU0sQ0FBQ1ksQ0FBQyxDQUFDO1VBQ1osQ0FBQyxDQUFDO1FBQ0QsQ0FBQyxDQUFDO01BQ0osQ0FBQztNQUNEQyxLQUFLLEVBQUUsTUFBQUEsQ0FBTztRQUFFaEIsWUFBWTtRQUFFaUI7TUFBTSxDQUFDLEtBQUs7UUFDcEMsTUFBTWIsS0FBSyxHQUFHO1VBQUVDLElBQUksRUFBRUw7UUFBYSxDQUFDO1FBQ3BDLE1BQU1rQixPQUFPLEdBQUc7VUFBRUMsTUFBTSxFQUFFO1FBQUssQ0FBQztRQUVwQyxNQUFNQyxTQUFTLEdBQUc7VUFDaEJDLElBQUksRUFBRTtZQUNKUixJQUFJLEVBQUVJLEtBQUs7WUFDWEssSUFBSSxFQUFFQyxJQUFJLENBQUNDLEdBQUcsQ0FBQztVQUNqQjtRQUNGLENBQUM7UUFDQSxJQUFJLENBQUNsQixFQUFFLEVBQUVDLFVBQVUsQ0FBQyxXQUFXLENBQUMsRUFBRWtCLFNBQVMsQ0FBQ3JCLEtBQUssRUFBQ2dCLFNBQVMsQ0FBQztRQUM1RFQsT0FBTyxDQUFDQyxHQUFHLENBQUMsYUFBYSxDQUFDO01BQzdCO0lBQ0YsQ0FBQztFQUlEO0VBRUEsTUFBTWMsV0FBV0EsQ0FBQSxFQUFHO0lBQ2xCLE1BQU1DLE1BQU0sR0FBRyxJQUFJQyxvQkFBVyxDQUFDLDJCQUEyQixDQUFDO0lBQzNELElBQUksQ0FBQ3RCLEVBQUUsR0FBR3FCLE1BQU0sQ0FBQ3JCLEVBQUUsQ0FBQyxNQUFNLENBQUM7RUFDN0I7RUFFQSxNQUFNdUIsUUFBUUEsQ0FBQSxFQUFHLENBRWpCO0FBQ0Y7QUFBQ0MsT0FBQSxDQUFBbEMsT0FBQSxHQUFBQSxPQUFBIn0=","map":{"version":3,"names":["_extensionDatabase","require","_mongodb","_defineProperty","obj","key","value","_toPropertyKey","Object","defineProperty","enumerable","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","MongoDB","Database","constructor","fetch","documentName","Promise","resolve","reject","query","name","db","collection","findOne","then","result","console","log","data","catch","e","store","state","options","upsert","updateDoc","$set","date","Date","now","updateOne","onConfigure","client","MongoClient","onListen","exports"],"sourceRoot":"/Users/ankitsah/git/sample-node-project/app/src/","sources":["mongoDBImpl.js"],"sourcesContent":["import { Database, DatabaseConfiguration } from '@hocuspocus/extension-database'\nimport {MongoClient} from 'mongodb'\n\n\nexport class MongoDB extends Database {\n  \n\n  configuration = {\n    fetch: async ({ documentName }) => {\n      return new Promise((resolve, reject) => {\n        const query = { name: documentName };\n         this.db?.collection(\"documents\")?.findOne(query).then((result)=>{\n      console.log(\"found\",query)\n      resolve(result?.data)\n     }).catch((e)=>{\n        reject(e)\n     })\n      })\n    },\n    store: async ({ documentName, state }) => {\n          const query = { name: documentName };\n          const options = { upsert: true };\n\n      const updateDoc = {\n        $set: {\n          data: state,\n          date: Date.now()\n        },\n      };\n       this.db?.collection(\"documents\")?.updateOne(query,updateDoc);\n       console.log(\"i am update\")\n    },\n  }\n\n  constructor() {\n    super({})\n  }\n\n  async onConfigure() {\n    const client = new MongoClient('mongodb://localhost:27017');\n    this.db = client.db(\"test\");\n  }\n\n  async onListen() {\n   \n  }\n}\n"],"mappings":";;;;;;AAAA,IAAAA,kBAAA,GAAAC,OAAA;AACA,IAAAC,QAAA,GAAAD,OAAA;AAAmC,SAAAE,gBAAAC,GAAA,EAAAC,GAAA,EAAAC,KAAA,IAAAD,GAAA,GAAAE,cAAA,CAAAF,GAAA,OAAAA,GAAA,IAAAD,GAAA,IAAAI,MAAA,CAAAC,cAAA,CAAAL,GAAA,EAAAC,GAAA,IAAAC,KAAA,EAAAA,KAAA,EAAAI,UAAA,QAAAC,YAAA,QAAAC,QAAA,oBAAAR,GAAA,CAAAC,GAAA,IAAAC,KAAA,WAAAF,GAAA;AAAA,SAAAG,eAAAM,GAAA,QAAAR,GAAA,GAAAS,YAAA,CAAAD,GAAA,2BAAAR,GAAA,gBAAAA,GAAA,GAAAU,MAAA,CAAAV,GAAA;AAAA,SAAAS,aAAAE,KAAA,EAAAC,IAAA,eAAAD,KAAA,iBAAAA,KAAA,kBAAAA,KAAA,MAAAE,IAAA,GAAAF,KAAA,CAAAG,MAAA,CAAAC,WAAA,OAAAF,IAAA,KAAAG,SAAA,QAAAC,GAAA,GAAAJ,IAAA,CAAAK,IAAA,CAAAP,KAAA,EAAAC,IAAA,2BAAAK,GAAA,sBAAAA,GAAA,YAAAE,SAAA,4DAAAP,IAAA,gBAAAF,MAAA,GAAAU,MAAA,EAAAT,KAAA;AAG5B,MAAMU,OAAO,SAASC,2BAAQ,CAAC;EA8BpCC,WAAWA,CAAA,EAAG;IACZ,KAAK,CAAC,CAAC,CAAC,CAAC;IAAAzB,eAAA,wBA5BK;MACd0B,KAAK,EAAE,MAAAA,CAAO;QAAEC;MAAa,CAAC,KAAK;QACjC,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;UACtC,MAAMC,KAAK,GAAG;YAAEC,IAAI,EAAEL;UAAa,CAAC;UACnC,IAAI,CAACM,EAAE,EAAEC,UAAU,CAAC,WAAW,CAAC,EAAEC,OAAO,CAACJ,KAAK,CAAC,CAACK,IAAI,CAAEC,MAAM,IAAG;YACnEC,OAAO,CAACC,GAAG,CAAC,OAAO,EAACR,KAAK,CAAC;YAC1BF,OAAO,CAACQ,MAAM,EAAEG,IAAI,CAAC;UACtB,CAAC,CAAC,CAACC,KAAK,CAAEC,CAAC,IAAG;YACXZ,MAAM,CAACY,CAAC,CAAC;UACZ,CAAC,CAAC;QACD,CAAC,CAAC;MACJ,CAAC;MACDC,KAAK,EAAE,MAAAA,CAAO;QAAEhB,YAAY;QAAEiB;MAAM,CAAC,KAAK;QACpC,MAAMb,KAAK,GAAG;UAAEC,IAAI,EAAEL;QAAa,CAAC;QACpC,MAAMkB,OAAO,GAAG;UAAEC,MAAM,EAAE;QAAK,CAAC;QAEpC,MAAMC,SAAS,GAAG;UAChBC,IAAI,EAAE;YACJR,IAAI,EAAEI,KAAK;YACXK,IAAI,EAAEC,IAAI,CAACC,GAAG,CAAC;UACjB;QACF,CAAC;QACA,IAAI,CAAClB,EAAE,EAAEC,UAAU,CAAC,WAAW,CAAC,EAAEkB,SAAS,CAACrB,KAAK,EAACgB,SAAS,CAAC;QAC5DT,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC;MAC7B;IACF,CAAC;EAID;EAEA,MAAMc,WAAWA,CAAA,EAAG;IAClB,MAAMC,MAAM,GAAG,IAAIC,oBAAW,CAAC,2BAA2B,CAAC;IAC3D,IAAI,CAACtB,EAAE,GAAGqB,MAAM,CAACrB,EAAE,CAAC,MAAM,CAAC;EAC7B;EAEA,MAAMuB,QAAQA,CAAA,EAAG,CAEjB;AACF;AAACC,OAAA,CAAAlC,OAAA,GAAAA,OAAA"}},"mtime":1688151175326}}